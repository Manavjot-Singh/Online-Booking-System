<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
  </head>
  <body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
<div class="container-flex" bis_skin_checked="1">
      <header
        class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom"
      >
        <a
          href="/"
          class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none"
        >
          <svg class="bi me-2" width="40" height="32" aria-hidden="true">
            <use xlink:href="#bootstrap"></use>
          </svg>
          <span class="fs-4">Albany Airlines</span>
        </a>
        <ul class="nav nav-pills">
          <li class="nav-item">
            <a href="#" class="nav-link active" aria-current="page">Home</a>
          </li>
          <li class="nav-item"><a href="#" class="nav-link">Book</a></li>
          <li class="nav-item"><a href="#" class="nav-link">About</a></li>
        </ul>
      </header>
    </div>  
    <form method="post" action="{% url 'booking_lookup' %}">
      {% csrf_token %}
      <div class="mb-3">
        {{ lookup_form.reference.label_tag }}
        {{ lookup_form.reference }}
      </div>
      <button type="submit" class="btn btn-primary">Search</button>
    </form>

    <!-- Show an error if lookup failed -->
    <div id="lookupError">
    {% if lookup_error %}
      <div class="alert alert-danger mt-3">{{ lookup_error }}</div>
    {% endif %}
    </div>

    <!-- Show the result if lookup succeeded -->
<div id="lookupResult">
    {% if lookup_result %}
      <hr>
      <h6>Booking Details</h6>
      <p><strong>Ref:</strong> {{ lookup_result.reference }}</p>
      <p><strong>Name:</strong> {{ lookup_result.name }}</p>
      <p><strong>Flight:</strong> {{ lookup_result.flight_no }} on {{ lookup_result.date }}</p>
      <p><strong>Route:</strong> {{ lookup_result.origin }} â†’ {{ lookup_result.destination }}</p>
      <p><strong>Departs:</strong> {{ lookup_result.dep_time|date:"g a" }} &nbsp; <strong>Arrives:</strong> {{ lookup_result.arr_time|date:"g a" }}</p>
      <p><strong>Status:</strong> {{ lookup_result.status }}</p>

       <form method="post" action="{% url 'cancel_booking' %}">
    {% csrf_token %}
    <input type="hidden" name="reference" value="{{ lookup_result.reference }}">
    <button type="submit" class="btn btn-danger">Cancel Booking</button>
  </form>
    {% endif %}
</div>




</body>
</html>