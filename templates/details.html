<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Lookup Booking</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
      crossorigin="anonymous"
    ></script>

    <header class="d-flex justify-content-center py-3 mb-4 border-bottom">
      <a
        href="{% url 'home' %}"
        class="d-flex align-items-center me-md-auto text-decoration-none ps-3"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="28"
          height="28"
          fill="currentColor"
          class="me-3"
          viewBox="0 0 16 16"
        >
          <path
            d="M6.428 1.151C6.708.591 7.213 0 8 0s1.292.592 1.572
             1.151C9.861 1.73 10 2.431 10 3v3.691l5.17 2.585a1.5
             1.5 0 0 1 .83 1.342V12a.5.5 0 0 1-.582.493l-5.507-.918
             -.375 2.253 1.318 1.318A.5.5 0 0 1 10.5 16h-5a.5.5 0 0
             1-.354-.854l1.319-1.318-.376-2.253-5.507.918A.5.5 0 0
             1 0 12v-1.382a1.5 1.5 0 0 1 .83-1.342L6 6.691V3c0-.568
             .14-1.271.428-1.849"
          />
        </svg>
        <span class="fs-3">Albany Airlines</span>
      </a>
      <ul class="nav nav-pills">
        <li class="nav-item">
          <a href="{% url 'home' %}" class="nav-link">Home</a>
        </li>
        <li class="nav-item">
          <a href="{% url 'search' %}" class="nav-link">Search</a>
        </li>
        <li class="nav-item"><a href="#" class="nav-link">About</a></li>
        <li class="nav-item">
          <a href="{% url 'booking_lookup' %}" class="nav-link">Find</a>
        </li>
      </ul>
    </header>

    <main class="container my-5">
      <div class="p-5 bg-body-tertiary rounded-3 text-center">
        <form
          method="post"
          action="{% url 'booking_lookup' %}"
          class="row g-3 justify-content-center"
        >
          {% csrf_token %}
          <div class="col-12">
            <label
              for="{{ lookup_form.reference.id_for_label }}"
              class="form-label"
              >Reference</label
            >
            {{ lookup_form.reference }}
          </div>
          <div class="col-12 mt-3">
            <button type="submit" class="btn btn-primary">Search</button>
          </div>
        </form>

        {% if lookup_error %}
        <div class="alert alert-danger mt-4">{{ lookup_error }}</div>
        {% endif %} {% if lookup_result %}
        <hr class="my-4" />
        <h5>Booking Details</h5>
        <p><strong>Ref:</strong> {{ lookup_result.reference }}</p>
        <p><strong>Name:</strong> {{ lookup_result.name }}</p>
        <p>
          <strong>Flight:</strong> {{ lookup_result.flight_no }} on {{
          lookup_result.date }}
        </p>
        <p>
          <strong>Route:</strong> {{ lookup_result.origin }} â†’ {{
          lookup_result.destination }}
        </p>
        <p>
          <strong>Departs:</strong> {{ lookup_result.dep_time|date:"g a" }}
          &nbsp; <strong>Arrives:</strong> {{ lookup_result.arr_time|date:"g a"
          }}
        </p>
        <p><strong>Status:</strong> {{ lookup_result.status }}</p>

        <form method="post" action="{% url 'cancel_booking' %}" class="mt-3">
          {% csrf_token %}
          <input
            type="hidden"
            name="reference"
            value="{{ lookup_result.reference }}"
          />
          <button type="submit" class="btn btn-danger">Cancel Booking</button>
        </form>
        {% endif %}
      </div>
    </main>
  </body>
</html>
